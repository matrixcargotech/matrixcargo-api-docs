<!DOCTYPE html>
<html lang="pt-BR">

<script>
  // Configuração das APIs - Edite aqui para adicionar/remover APIs
  const docs = [
    {
      "id": "tracking",
      "title": "Tracking API",
      "description": "Rastreamento de cargas em tempo real e consulta de status de entrega.",
      "baseUrl": "https://tracking-api-homol.matrixcargo.com.br",
      "endpoints": [
        {
          "path": "/api/docs"
        },
        {
          "path": "/api/internal/docs"
        }
      ]
    },
    {
      "id": "painel-logistico",
      "title": "Painel Logístico API",
      "description": "APIs para gestão logística, relatórios e controle operacional.",
      "baseUrl": "https://painel-logistico-api-homol.matrixcargo.com.br",
      "endpoints": [
        {
          "path": "/api/docs"
        },
        {
          "path": "/api/internal/docs"
        }
      ]
    }
  ];
</script>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MatrixCargo - Documentação das APIs</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="icon" href="image.jpg" type="image/jpeg">
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div class="container">
    <header>
      <div class="logo">
        <img src="image.jpg" alt="MatrixCargo Logo">
      </div>
      <div class="brand">
        <h1>Documentação das APIs</h1>
        <p class="subtitle">
          Acesse a documentação completa das nossas APIs para integrar
          os serviços da MatrixCargo ao seu sistema.
        </p>
        <div class="search-container">
          <input type="text" class="search-input" placeholder="Buscar API..." id="searchInput">
        </div>
      </div>
    </header>

    <main>
      <div class="apis-container" id="apisContainer">
        <!-- APIs serão carregadas dinamicamente via JavaScript -->
      </div>
    </main>

    <footer>
      <p>&copy; <span id="currentYear"></span> MatrixCargo. Todos os direitos reservados.</p>
    </footer>
  </div>

  <div class="notification" id="notification">
    ✓ Link copiado com sucesso!
  </div>

  <script>
    // Atualizar o ano atual no rodapé
    document.getElementById("currentYear").textContent = new Date().getFullYear();

    // Renderizar APIs
    function renderApis() {
      const container = document.getElementById('apisContainer');
      container.innerHTML = '';

      docs.forEach(api => {
        const apiSection = createApiSection(api);
        container.appendChild(apiSection);
      });
    }

    // Criar seção de API
    function createApiSection(api) {
      const section = document.createElement('div');
      section.className = 'api-section';
      section.setAttribute('data-api', api.id);

      const header = document.createElement('div');
      header.className = 'api-header';

      const title = document.createElement('h2');
      title.className = 'api-title';
      title.textContent = api.title;

      const description = document.createElement('p');
      description.className = 'api-description';
      description.textContent = api.description;

      header.appendChild(title);
      header.appendChild(description);

      const linksContainer = document.createElement('div');
      linksContainer.className = 'api-links';

      api.endpoints.forEach(endpoint => {
        const linkItem = createLinkItem(endpoint, api.baseUrl);
        linksContainer.appendChild(linkItem);
      });

      section.appendChild(header);
      section.appendChild(linksContainer);

      return section;
    }

    // Criar item de link
    function createLinkItem(endpoint, baseUrl) {
      const linkItem = document.createElement('div');
      linkItem.className = 'link-item';

      const pathSpan = document.createElement('span');
      pathSpan.className = 'link-path';
      pathSpan.textContent = endpoint.path;

      const actionsDiv = document.createElement('div');
      actionsDiv.className = 'link-actions';

      const fullUrl = baseUrl + endpoint.path;

      // Botão copiar
      const copyButton = document.createElement('button');
      copyButton.className = 'btn btn-copy';
      copyButton.textContent = 'Copiar';
      copyButton.onclick = () => copyLink(fullUrl, copyButton);

      // Botão abrir
      const openButton = document.createElement('a');
      openButton.href = fullUrl;
      openButton.target = '_blank';
      openButton.className = 'btn btn-open';
      openButton.textContent = 'Abrir';

      actionsDiv.appendChild(copyButton);
      actionsDiv.appendChild(openButton);

      linkItem.appendChild(pathSpan);
      linkItem.appendChild(actionsDiv);

      return linkItem;
    }

    // Função para copiar link
    function copyLink(url, button) {
      navigator.clipboard.writeText(url).then(function () {
        // Feedback no botão
        const originalText = button.textContent;
        button.classList.add('copied');
        button.textContent = '✓ Copiado';

        // Mostrar notificação
        const notification = document.getElementById('notification');
        notification.classList.add('show');

        // Resetar após 2 segundos
        setTimeout(() => {
          button.classList.remove('copied');
          button.textContent = originalText;
          notification.classList.remove('show');
        }, 2000);
      }).catch(function () {
        alert('Erro ao copiar o link. Tente selecionar e copiar manualmente.');
      });
    }

    // Funcionalidade de busca
    function initializeSearch() {
      document.getElementById('searchInput').addEventListener('input', function (e) {
        const searchTerm = e.target.value.toLowerCase();
        const apiSections = document.querySelectorAll('.api-section');

        apiSections.forEach(section => {
          const title = section.querySelector('.api-title').textContent.toLowerCase();
          const description = section.querySelector('.api-description').textContent.toLowerCase();

          if (title.includes(searchTerm) || description.includes(searchTerm) || searchTerm === '') {
            section.style.display = 'flex';
          } else {
            section.style.display = 'none';
          }
        });
      });
    }

    // Inicializar quando a página carregar
    document.addEventListener('DOMContentLoaded', function () {
      renderApis();
      initializeSearch();
    });
  </script>
</body>

</html>